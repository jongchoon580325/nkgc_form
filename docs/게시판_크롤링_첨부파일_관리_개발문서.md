# 📑 게시판 크롤링 & 첨부파일 관리 개발문서

## 1. 기술 스택
- **Next.js** (최신 App Router)
- **TypeScript**
- **Tailwind CSS**
- **IndexedDB** (로컬 데이터 저장)
- **cheerio** (HTML 파싱)
- **axios** (HTML 소스 요청)
- **html-entities** (HTML 엔티티 디코딩)

---

## 2. 주요 기능 및 프로세스

### 2.1. 사용자 입력
- 사용자가 크롤링할 KBoard 게시판의 **URL**을 입력
- [크롤링] 버튼 클릭 시 데이터 수집 시작

### 2.2. 데이터 추출 로직
- **Step 1:** 리스트 페이지 HTML 파싱
  - 각 게시글의 **제목**과 **상세페이지 URL** 추출
  - 정규식 예시:
    - 제목: `<div class="kboard-default-cut-strings">\s*(.*?)\s*<`
    - 상세페이지 URL: `href="/\?pageid=\d+&page_id=\d+&mod=document&uid=\d+"`
- **Step 2:** 상세페이지 HTML 파싱
  - 각 게시글 상세페이지에서 **첨부파일명**과 **다운로드 링크** 추출
  - 정규식 예시:
    - 다운로드 URL: `/\?pageid=\d+&page_id=\d+&uid=\d+&action=kboard_file_download&kboard-file-download-nonce=\w+&file=\w+/`
    - 파일명: `title="다운로드 ([^"]+)"`
- **Step 3:** 데이터 정리 및 저장
  - 추출한 데이터를 **IndexedDB**에 저장
  - 테이블 형태로 화면에 표시

---

## 3. 데이터베이스 설계 (IndexedDB)
- **Key:** 게시글 고유 ID (예: uid)
- **Value:**
  - 번호
  - 제목
  - 첨부파일명 (없을 경우 '파일첨부없음')
  - 다운로드 URL (없을 경우 비활성)

---

## 4. UI/UX 및 레이아웃
- **참고:** 첨부 이미지(@page_layout.png)와 동일한 구조로 구현
- **상단:**
  - 게시판 URL 입력창
  - [크롤링] 버튼
  - IndexedDB 저장 데이터 개수 표시
  - [전체 삭제] 버튼
- **테이블:**
  - 컬럼: 번호 | 제목 | 첨부파일명 | 다운로드 | 삭제
  - 각 행마다 다운로드/삭제 버튼 제공
  - 첨부파일 없을 경우 '파일첨부없음' 표시 및 다운로드 버튼 비활성화
- **다크모드:**
  - 배경색: #000 (검정)
  - 폰트색: #fff (흰색) 또는 가독성 높은 밝은 계열
  - Tailwind CSS 다크모드 유틸리티 적극 활용

---

## 5. 접근성 및 기타 고려사항
- 테이블/버튼 등 모든 UI 요소는 키보드 접근성 및 시맨틱 마크업 준수
- 데이터 삭제 시 사용자 확인(Confirm) 처리
- 크롤링/파싱 실패 시 에러 메시지 안내
- 코드 분리: 크롤링/파싱 로직, IndexedDB 관리, UI 컴포넌트 분리

---

## 6. 참고 라이브러리
- [cheerio](https://www.npmjs.com/package/cheerio)
- [html-entities](https://www.npmjs.com/package/html-entities)
- [idb](https://www.npmjs.com/package/idb) (IndexedDB wrapper)

---

## 7. 예시 화면
- 첨부된 @page_layout.png 참고 (실제 구현 시 Tailwind CSS로 스타일링)

---

## 8. 개발 및 배포
- Conventional Commits, 브랜치 전략, 코드 스타일 등 사내 개발 규칙 준수
- README 및 상세 문서 docs/ 디렉토리 내 작성 